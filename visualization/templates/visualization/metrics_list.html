{% extends "../base.html" %}
{% load static %}

{% block title %}Historique des Mesures{% endblock %}

{% block content %}
<h2 class="text-center my-4 text-primary fw-bold">ðŸ“Š Historique des Mesures MÃ©tÃ©o</h2>

<!-- Latest Data Card (optional) -->
{% if metrics.latest %}
<div class="row justify-content-center mb-4">
    <div class="col-md-4">
        <div class="card shadow-sm p-3 text-center bg-light">
            <h5 class="fw-bold"><i class="fa-solid fa-cloud-sun"></i> DerniÃ¨re Mesure</h5>
            <p>TempÃ©rature: {{ metrics.latest.temperature }} Â°C</p>
            <p>HumiditÃ©: {{ metrics.latest.humidity }} %</p>
            <p>Pression: {{ metrics.latest.pressure }} hPa</p>
            <p>Condition: {{ metrics.latest.condition }}</p>
            <p>Timestamp: {{ metrics.latest.timestamp }}</p>
        </div>
    </div>
</div>
{% endif %}

<!-- Optional: Export buttons -->
<div class="text-end mt-3 me-3">
    <a href="" class="btn btn-primary">
        <i class="fa-solid fa-file-csv"></i> Exporter CSV
    </a>
    <a href="" class="btn btn-primary">
        <i class="fa-solid fa-file-pdf"></i> Exporter PDF
    </a>
</div>

<!-- Table -->
<div class="table-responsive shadow-sm rounded-4 p-3" style="background: #f8fafc;">
    <table class="table table-striped table-hover align-middle">
        <thead class="table-primary text-center">
            <tr>
                <th>Timestamp</th>
                <th>TempÃ©rature (Â°C)</th>
                <th>HumiditÃ© (%)</th>
                <th>Pression (hPa)</th>
                <th>Condition</th>
                <th>Vent (m/s)</th>
                <th>Dir Vent (Â°)</th>
                <th>Pluie (mm)</th>
                <th>UV</th>
                <th>VisibilitÃ© (km)</th>
                <th>Nuages (%)</th>
            </tr>
        </thead>
        <tbody class="text-center">
            {% for m in all_metrics %}
            <tr>
                <td>{{ m.timestamp }}</td>
                <td>{{ m.temperature }}</td>
                <td>{{ m.humidity }}</td>
                <td>{{ m.pressure }}</td>
                <td>{{ m.condition }}</td>
                <td>{{ m.wind_speed }}</td>
                <td>{{ m.wind_direction }}</td>
                <td>{{ m.rainfall }}</td>
                <td>{{ m.uv_index }}</td>
                <td>{{ m.visibility }}</td>
                <td>{{ m.cloud_cover }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="11" class="text-center fw-semibold">Aucune donnÃ©e disponible.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
